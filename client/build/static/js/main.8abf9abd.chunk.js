(this["webpackJsonpemail-sender"]=this["webpackJsonpemail-sender"]||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/clip.86d1bbc5.svg"},18:function(e,t,a){e.exports=a(31)},30:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),l=a.n(c),i=a(9),o=a.n(i),s=a(13),m=a(17),u=a(2),f=a(3),d=function(e){var t=e.value,a=e.id,c=e.type,l=e.action,i=e.placeholder,o=Object(n.useState)(t),s=Object(u.a)(o,2),m=s[0],d=s[1],p=Object(n.useState)(!1),_=Object(u.a)(p,2),E=_[0],b=_[1],h=Object(f.b)();return r.a.createElement("label",{htmlFor:a,className:"form__label"},r.a.createElement("input",{id:a,name:a,type:c,value:m,className:"form__input ".concat(E?"form__input--active":""," ").concat(""!==m?"form__input--not-empty":""),onFocus:function(e){return b(!1)},onBlur:function(e){return b(!1)},onChange:function(e){return function(e){h(l(e.target.value)),d(e.target.value)}(e)}}),r.a.createElement("span",{className:"form__input-placeholder"},i),r.a.createElement("span",{className:"form__input-border"}))},p=function(e){var t=e.value,a=e.id,c=e.placeholder,l=e.action,i=Object(n.useState)(t),o=Object(u.a)(i,2),s=o[0],m=o[1],d=Object(n.useState)(!1),p=Object(u.a)(d,2),_=p[0],E=p[1],b=Object(f.b)();return r.a.createElement("label",{htmlFor:a,className:"form__label"},r.a.createElement("textarea",{id:a,name:a,className:"form__textarea ".concat(_?"form__textarea--active":""," ").concat(""!==s?"form__textarea--not-empty":""),onFocus:function(e){return E(!1)},onBlur:function(e){return E(!1)},onChange:function(e){return function(e){b(l(e.target.value)),m(e.target.value)}(e)},rows:"8","data-test":"textarea"}),r.a.createElement("span",{className:"form__textarea-placeholder"},c),r.a.createElement("span",{className:"form__textarea-border"}))},_=a(15),E=a.n(_),b=function(e){var t=e.formats,a=e.maxSize,c=e.maxCount,l=e.value,i=e.action,o=Object(n.useState)(l),s=Object(u.a)(o,2),m=s[0],d=s[1],p=Object(n.useState)(""),_=Object(u.a)(p,2),b=_[0],h=_[1],j=a*Math.pow(1024,2),O=c,N=Object(f.b)();return r.a.createElement("div",{className:"form__attach-wrapper"},r.a.createElement("label",{className:"form__label--file"},r.a.createElement("input",{id:"file",name:"file",type:"file",className:"form__file","data-max-size":j,"data-max-count":O,accept:t.join(","),multiple:!0,onChange:function(e){return function(e){var t=!1,n=[].map.call(e.target.files,(function(e){return{name:e.name,size:e.size,type:e.type}}));n.length>O&&(t=!0,h("Max amount of files is ".concat(O))),n.forEach((function(e){e.size>j&&(t=!0,h("File ".concat(e.name.slice(0,10)+"..."," is larger ").concat(a,"mb")))})),t||(h(),N(i(n)),d(n))}(e)}}),r.a.createElement("img",{src:E.a,alt:"clip",className:"form__file-img"}),r.a.createElement("span",{className:"form__file-text"},m.length>0?"".concat(m.length," file(s)"):"Attach file")),m.length>0?r.a.createElement("span",{className:"form__file-clear",onClick:function(e){return document.getElementById("file").value="",N(i([])),void d([])}},"\xd7"):"",b?r.a.createElement("span",{className:"form__file-err"},b):"")},h=function(e){var t=e.value;return r.a.createElement("input",{id:"submit",name:"submit",type:"submit",className:"form__submit button button--blue",value:t})},j=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)(!1),c=Object(u.a)(a,2),l=c[0],i=c[1],o=Object(n.useRef)(t),s=function(e){return i(!0)},m=function(e){return i(!1)};return Object(n.useImperativeHandle)(t,(function(e){return{el:o,show:s,hide:m}})),r.a.createElement("section",{ref:o,className:"modal__message ".concat(l?"modal__message--visible":"")},r.a.createElement("div",{className:"modal__bg"}),r.a.createElement("div",{className:"modal__content"},r.a.createElement("div",{className:"modal__text--message"}),r.a.createElement("span",{onClick:m,className:"modal__button button button--green"},"Ok")))})),O=function(e){return{type:"SET_SENDER_NAME",payload:e}},N=function(e){return{type:"SET_SENDER_EMAIL",payload:e}},v=function(e){return{type:"SET_RECIPICIENT_NAME",payload:e}},S=function(e){return{type:"SET_RECIPICIENT_EMAIL",payload:e}},g=function(e){return{type:"SET_SUBJECT",payload:e}},y=function(e){return{type:"SET_MESSAGE",payload:e}},M=function(e){return{type:"ADD_FILES",payload:e}},x=function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],l=a[1],i=Object(f.c)().getState().form,_=Object(f.c)(),E=Object(n.useRef)(),x=function(e){e.preventDefault();var t=[],a=_.getState().form;if(Object(m.a)(document.querySelectorAll(".form__input--has-error")).forEach((function(e){return e.classList.remove("form__input--has-error")})),""===a.senderName&&t.push("sender_name"),""!==a.senderMail&&a.senderMail!==a.recipicientMail||t.push("sender_email"),""===a.recipicientName&&t.push("recipicient_name"),""!==a.recipicientMail&&a.recipicientMail!==a.senderMail||t.push("recipicient_email"),""===a.subject&&t.push("subject"),""===a.message&&t.push("message"),t.length>0)return t.forEach((function(e){document.querySelector('[name="'.concat(e,'"]')).classList.add("form__input--has-error")})),!1;!function(e,t){w.apply(this,arguments)}("http://localhost:3001/send",JSON.stringify({senderName:a.senderName,senderEmail:a.senderMail,recipicientName:a.recipicientName,recipicientEmail:a.recipicientMail,subject:a.subject,message:a.message,files:a.files}))};function w(){return(w=Object(s.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:a}).then((function(e){E.current.el.current.querySelector(".modal__text--message").innerHTML=200===e.status?"Message were successfully sent!":"Something is wrong",E.current.show()}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(e){fetch("http://localhost:3001/mailerAPI").then((function(e){return e.text()})).then((function(e){return l(e)}))}),[c]),r.a.createElement("form",{method:"POST",action:"send",className:"form",onSubmit:function(e){return x(e)},id:"email-form"},r.a.createElement("div",{className:"form__row"},r.a.createElement("div",{className:"form__block"},r.a.createElement("h2",{className:"form__text--header"},r.a.createElement("span",null,"From")),r.a.createElement(d,{id:"sender_name",value:i.senderName,action:O,type:"text",placeholder:"Name"}),r.a.createElement(d,{id:"sender_email",value:i.senderMail,action:N,type:"email",placeholder:"Email"})),r.a.createElement("div",{className:"form__block"},r.a.createElement("h2",{className:"form__text--header"},r.a.createElement("span",null,"To")),r.a.createElement(d,{id:"recipicient_name",value:i.recipicientName,action:v,type:"text",placeholder:"Name"}),r.a.createElement(d,{id:"recipicient_email",value:i.recipicientMail,action:S,type:"email",placeholder:"Email"}))),r.a.createElement("div",{className:"form__row"},r.a.createElement(d,{id:"subject",value:i.subject,action:g,type:"text",placeholder:"Subject"})),r.a.createElement("div",{className:"form__row"},r.a.createElement(p,{id:"message",value:i.message,action:y,placeholder:"Message"})),r.a.createElement("div",{className:"form__row"},r.a.createElement(b,{id:"attachments",maxSize:5,maxCount:5,formats:[".doc",".docx",".pdf"],value:[],action:M}),r.a.createElement(h,{value:"Send"})),r.a.createElement(j,{ref:E}))},w=function(e){var t=e.value;return r.a.createElement("header",{"data-test":"header",className:"header"},r.a.createElement("h1",{className:"header__text"},t))};var T=function(){return r.a.createElement("main",null,r.a.createElement(w,{value:"Email Sender"}),r.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(30);var I=a(4),C=a(1),A=a(16),R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||I.c,D=[A.a],k=Object(I.d)((function(e,t){var a=t.type,n=t.payload;switch(a){case"SET_SENDER_NAME":return Object(C.a)(Object(C.a)({},e),{},{form:Object(C.a)(Object(C.a)({},e.form),{},{senderName:n})});case"SET_SENDER_EMAIL":return Object(C.a)(Object(C.a)({},e),{},{form:Object(C.a)(Object(C.a)({},e.form),{},{senderMail:n})});case"SET_RECIPICIENT_NAME":return Object(C.a)(Object(C.a)({},e),{},{form:Object(C.a)(Object(C.a)({},e.form),{},{recipicientName:n})});case"SET_RECIPICIENT_EMAIL":return Object(C.a)(Object(C.a)({},e),{},{form:Object(C.a)(Object(C.a)({},e.form),{},{recipicientMail:n})});case"SET_SUBJECT":return Object(C.a)(Object(C.a)({},e),{},{form:Object(C.a)(Object(C.a)({},e.form),{},{subject:n})});case"SET_MESSAGE":return Object(C.a)(Object(C.a)({},e),{},{form:Object(C.a)(Object(C.a)({},e.form),{},{message:n})});case"ADD_FILES":return Object(C.a)(Object(C.a)({},e),{},{form:Object(C.a)(Object(C.a)({},e.form),{},{files:n})});default:return Object(C.a)({},e)}}),{form:{senderName:"",senderMail:"",recipicientName:"",recipicientMail:"",subject:"",message:"",files:[]}},R(I.a.apply(void 0,D)));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(f.a,{store:k},r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.8abf9abd.chunk.js.map